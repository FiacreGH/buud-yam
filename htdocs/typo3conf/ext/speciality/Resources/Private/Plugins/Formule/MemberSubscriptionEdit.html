<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"
      xmlns:f="http://typo3.org/ns/fluid/ViewHelpers"
      xmlns:fo="http://typo3.org/ns/Fab/Formule/ViewHelpers">

<f:layout name="Default"/>

<f:section name="main">

	<fo:loadAssets/>

	<style>
		.red {
			color: red;
		}
	</style>

	<fo:loadAssets>
		<script>
			$(document).ready(function() {
				$('#characterLeft').text('{f:translate(key:"contact.limit.total.characters")}');
				$('#message').keydown(function() {
					var max = 140;
					var len = $(this).val().length;
					if (len >= max) {
						$('#characterLeft').text('{f:translate(key:"contact.limit.met")}');
						$('#characterLeft').addClass('red');
						$('#btnSubmit').addClass('disabled');
					}
					else {
						var numberOfCharacters = max - len;
						$('#characterLeft').text(numberOfCharacters + ' {f:translate(key:"contact.limit.characters")}');
						$('#btnSubmit').removeClass('disabled');
						$('#characterLeft').removeClass('red');
					}
				});
			});
		</script>
	</fo:loadAssets>

	<f:if condition="{values.uid}">
		<f:then>
			<f:render section="FormError" partial="Form/Error" arguments="{_all}"/>
			<div class="form-area">
				<f:form class="form-horizontal" action="submit" controller="Form" additionalAttributes="{role: 'form'}" method="post">

					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="first_name">
									{f:translate(key:'first_name', extensionName:'speciality')}
								</label>
								<input type="text"
								       name="first_name"
								       id="first_name" class="form-control"
								       value="{values.first_name}"
								       required
								       placeholder="{f:translate(key:'first_name', extensionName:'speciality')}"/>
								<span class="help-block">{fo:message.error(field: 'first_name')}</span>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label for="last_name">
									{f:translate(key:'last_name', extensionName:'speciality')}
								</label>
								<input type="text"
								       name="last_name"
								       id="last_name"
								       class="form-control"
								       value="{values.last_name}"
								       required
								       placeholder="{f:translate(key:'last_name_plus', extensionName:'speciality')}"/>
								<span class="help-block">{fo:message.error(field: 'last_name')}</span>
							</div>
						</div>
					</div>

					<div class="label-text">
						Je suis :
					</div>
					<label class="radio-inline" for="gender_m">
						<input type="radio"
						       name="gender"
						       id="gender_m"
						       value="Mr">
						{f:translate(key:'gender_m', extensionName:'speciality')}
					</label>
					<label class="radio-inline" for="gender_f">
						<input type="radio"
						       name="gender"
						       id="gender_f"
						       value="Mme">
						{f:translate(key:'gender_f', extensionName:'speciality')}
					</label>

					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="country">
									{f:translate(key:'country', extensionName:'speciality')}
								</label>
								<input type="text"
								       name="country"
								       id="country" class="form-control"
								       value="{values.country}"
								       required
								       placeholder="{f:translate(key:'country', extensionName:'speciality')}"/>
								<span class="help-block">{fo:message.error(field: 'country')}</span>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label for="city">
									{f:translate(key:'city', extensionName:'speciality')}
								</label>
								<input type="text"
								       name="city"
								       id="city"
								       class="form-control"
								       value="{values.city}"
								       required
								       placeholder="{f:translate(key:'city', extensionName:'speciality')}"/>
								<span class="help-block">{fo:message.error(field: 'city')}</span>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="organisation">
									{f:translate(key:'organisation', extensionName:'speciality')}
								</label>
								<input type="text"
								       name="organisation"
								       id="organisation" class="form-control"
								       value="{values.organisation}"
								       required
								       placeholder="{f:translate(key:'organisation', extensionName:'speciality')}"/>
								<span class="help-block">{fo:message.error(field: 'organisation')}</span>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label for="address">
									{f:translate(key:'address', extensionName:'speciality')}
								</label>
								<input type="text"
								       name="address"
								       id="address"
								       class="form-control"
								       value="{values.address}"
								       required
								       placeholder="{f:translate(key:'address', extensionName:'speciality')}"/>
								<span class="help-block">{fo:message.error(field: 'address')}</span>
							</div>
						</div>
					</div>

					<div class="form-group">
						<label for="email">
							{f:translate(key:'email', extensionName:'speciality')}
						</label>
						<input type="email"
						       name="email"
						       id="email"
						       class="form-control"
						       value="{values.email}"
						       required
						       placeholder="{f:translate(key:'email', extensionName:'speciality')}"/>
						<span class="help-block">{fo:message.error(field: 'email')}</span>
					</div>

					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="phone">
									{f:translate(key:'phone', extensionName:'speciality')}
								</label>
								<input type="text"
								       name="phone"
								       id="phone" class="form-control"
								       value="{values.phone}"
								       required
								       placeholder="{f:translate(key:'phone', extensionName:'speciality')}"/>
								<span class="help-block">{fo:message.error(field: 'phone')}</span>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label for="mobile_phone">
									{f:translate(key:'mobile_phone', extensionName:'speciality')}
								</label>
								<input type="text"
								       name="mobile_phone"
								       id="mobile_phone"
								       class="form-control"
								       value="{values.mobile_phone}"
								       placeholder="{f:translate(key:'mobile_phone', extensionName:'speciality')}"/>
								<span class="help-block">{fo:message.error(field: 'mobile_phone')}</span>
							</div>
						</div>
					</div>

					<div class="label-text">
						Veuillez choisir un montant de contribution:
					</div>
					<div class="form-group">
						<div class="col-sm-1"></div>
						<label class="col-sm-11 control-label" for="option0">
							<input type="radio"
							       name="member"
							       id="option0"
							       value="50">
							{f:translate(key:'option0', extensionName:'speciality')}
						</label>
					</div>
					<div class="form-group">
						<div class="col-sm-1"></div>
						<label class="col-sm-11 control-label" for="option1">
							<input type="radio"
							       name="member"
							       id="option1"
							       value="70">
							{f:translate(key:'option1', extensionName:'speciality')}
						</label>
					</div>
					<div class="form-group">
						<div class="col-sm-1"></div>
						<label class="col-sm-11 control-label" for="option2">
							<input type="radio"
							       name="member"
							       id="option2"
							       value="100">
							{f:translate(key:'option2', extensionName:'speciality')}
						</label>
					</div>
					<div class="form-group">
						<div class="col-sm-1"></div>
						<label class="col-sm-11 control-label" for="option3">
							<input type="radio"
							       name="member"
							       id="option3"
							       value="200">
							{f:translate(key:'option3', extensionName:'speciality')}
						</label>
					</div>

					<div class="checkbox {fo:hasError(field: 'is_member_active')}">
						<label>
							<input type="hidden" name="is_member_active" value="0"/>

							<input type="checkbox"
							       id="is_member_active"
							       {f:if(condition: "{values.is_member_active}", then: 'checked="checked"')}
							name="is_member_active"
							value="1"/>
							<f:translate key="is_member_active" extensionName="speciality"/>
						</label>
					</div>

					<input type="submit"
					       style="margin-left: 10px"
					       value="{f:translate(key:'newsletter.update', extensionName:'speciality')}"
					       class="btn btn-primary pull-right">

					<input type="submit"
					       id="submit-delete"
					       value="{f:translate(key:'newsletter.delete', extensionName:'speciality')}"
					       class="btn btn-danger pull-right">

					<f:comment><!-- The only mandatory field --></f:comment>
					<f:form.hidden name="values" value="{contentElement.uid}"/>

					<input type="hidden" name="token" value="{fo:gp(key: 'token')}"/>
					<input type="hidden" id="btn-delete" name="delete" value="0"/>

					<f:comment><!--Display hint in Development context (optional) --></f:comment>
					<fo:message.development/>
				</f:form>
			</div>
		</f:then>
		<f:else>
			<f:translate key="token.invalid"/>
		</f:else>
	</f:if>
</f:section>

<f:section name="emailAdmin">
	<f:translate key="admin_email_body" extensionName="speciality"/>
	<fo:form.show labelsIn="speciality"/>
</f:section>

<f:section name="emailUser">
	<f:translate key="user_email_body" extensionName="speciality"/>
	<fo:form.show labelsIn="speciality"/>
</f:section>

<f:section name="feedback">
	<p>
		<f:translate key="feedback_body" extensionName="speciality"/>
	</p>

	<fo:form.show labelsIn="speciality"/>
</f:section>
</html>
